<% provide(:title, "Liga AMS") %>
<% provide(:active_section, "speedcubing") %>
<%= render "layouts/page_wrapper", title: "Liga AMS" do %>
  <h3 id="introducción">Introducción</h3>
  <p>La <b>Liga AMS</b> consiste en un sistema de puntuación basado en los resultados en competiciones oficiales de la WCA organizadas por (o en colaboración con) la AMS en el que participan gratuita y automáticamente todos los socios de la AMS. Los puntos se obtienen asistiendo a competiciones tradicionales organizadas por la AMS y clasificándose en unas determinadas posiciones en cada categoría. Tras la finalización de cada campeonato de la AMS se publicará una actualización del ránking de socios en la liga. <b>Todas las categorías oficiales de la WCA cuentan para la liga</b>.</p>
  <p>Todos los socios de la AMS asistentes a cada campeonato que forme parte de la liga obtendrán <b>10 puntos sólo por el hecho de asistir al campeonato</b>. Los puntos obtenidos en función de la clasificación final de cada competidor en cada categoría son los siguientes:</p>

  <div id="points-summary-table" class="table table-responsive">
    <% headers = ["Posición", "Puntos"] %>
    <%= render "shared/compact_table", headers: headers do %>
      <tr> <td>1ª</td> <td>25</td> </tr>
      <tr> <td>2ª</td> <td>18</td> </tr>
      <tr> <td>3ª</td> <td>15</td> </tr>
      <tr> <td>4ª</td> <td>12</td> </tr>
      <tr> <td>5ª</td> <td>10</td> </tr>
      <tr> <td>6ª</td> <td>8</td> </tr>
      <tr> <td>7ª</td> <td>6</td> </tr>
      <tr> <td>8ª</td> <td>5</td> </tr>
      <tr> <td>9ª</td> <td>4</td> </tr>
      <tr> <td>10ª</td> <td>3</td> </tr>
      <tr> <td>11ª</td> <td>2</td> </tr>
      <tr> <td>12ª</td> <td>1</td> </tr>
    <% end %>
  </div>

  <p>No se asignarán puntos en ningún caso a un resultado DNF o DNS, pero si computará para el número de participantes en dicha categoría.</p>
  <p>Con este sistema de puntuación se premia el acceso a las finales clásicas donde compiten los 12 primeros clasificados en las categorías con varias rondas. Además, para diferenciar el nivel relativo de cada categoría, <b>se multiplicarán los puntos obtenidos en cada categoría por un coeficiente de mayoración propio de cada una de ellas</b>, favoreciendo así los buenos resultados en una categoría en un campeonato con muchos competidores frente al mismo resultado en la misma categoría en un campeonato con menos competidores. Este coeficiente (\(c\)) depende del número de participantes en cada categoría (\(n\)) de la siguiente forma: $$c = 1 + {n \over 100}.$$</p>

  <div id="example-container" class="container">
    <div id="accordion" class="panel-group">
      <div class="panel panel-default">
        <div class="panel-heading heading-as-link">
          <h5 class="panel-title">
            <%= link_to ("<i class='fa fa-plus'></i> Ejemplo").html_safe, "#example", data: { toggle: "collapse", parent: "#accordion" } %>
          </h5>
        </div>
        <div id="example" class="panel-collapse collapse">
          <div class="panel-body">
            <p>Si en un campeonato participan 100 personas en el Cubo 3x3x3, el primer puesto en dicha categoría adjudicará \(25·(1+{100 \over 100})=50 \) puntos, mientras que si participan 50 competidores se adjudicarán \(25·(1+{50 \over 100})=37,5 \) puntos.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <p>La liga finaliza en el Campeonato AMS del año en cuestión, <b>donde todos los puntos que se consigan contarán el doble</b>. Al acabar el campeonato se anunciará el podio y se entregarán los correspondientes premios y/o trofeos.</p>

  <div id="info-container" class="container">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h5 class="panel-title">
          <i class='fa fa-info'></i>
        </h5>
      </div>
      <div class="panel-body">
        <p>La participación en la Liga AMS está destinada a todos los socios de la AMS, independientemente de que sean madrileños o no. Si una persona se asocia a la AMS en mitad de la liga empezará a recibir puntos desde el primer campeonato en el que compita con la condición de socio AMS.</p>
      </div>
    </div>
  </div>

  <h3 id="edición-2019">Edición 2019</h3>
  <p>Los campeonatos que contabilizan para la edición de 2019 de la Liga AMS son:
    <ul>
      <li><%= link_to "Getafe Vuelve 2019", Competition.find("GetafeVuelve2019").website, target: "_blank" %></li>
      <li><%= link_to "FMC Europe 2019", wca_competition_url("FMCEurope2019"), target: "_blank" %></li>
      <li><%= link_to "Cervantes Cubea 2019", Competition.find("CervantesCubea2019").website, target: "_blank" %></li>
      <li><%= link_to "UCM Open 2019", Competition.find("UCMOpen2019").website, target: "_blank" %></li>
      <li><%= link_to "FMC 2019", wca_competition_url("FMC2019"), target: "_blank" %></li>
      <li><%= link_to "Parla Open 2019", Competition.find("ParlaOpen2019").website, target: "_blank" %></li>
      <li>Próximamente se anunciarán más competiciones</li>
    </ul>
  </p>

  <p>La clasificación general, después de la cuarta jornada, es:</p>

  <% classification_2019 = [
    {
      position: "1ª",
      name: "Manuel Prieto de Antón",
      wca_id: "2015ANTO04",
      points: "736.05",
    },
    {
      position: "2ª",
      name: "Alberto Pérez de Rada Fiol",
      wca_id: "2011FIOL01",
      points: "273.15",
    },
    {
      position: "3ª",
      name: "José Antonio Navarro Sánchez",
      wca_id: "2015SANC18",
      points: "238.46",
    },
    {
      position: "4ª",
      name: "Jaime Botello García",
      wca_id: "2016GARC52",
      points: "230.56",
    },
    {
      position: "5ª",
      name: "Raúl Martínez Redondo",
      wca_id: "2017REDO02",
      points: "224.39",
    },
    {
      position: "6ª",
      name: "Adrián Martínez Macías",
      wca_id: "2013MACI01",
      points: "217.53",
    },
    {
      position: "7ª",
      name: "Eder Olivencia González",
      wca_id: "2012GONZ10",
      points: "174.16",
    },
    {
      position: "8ª",
      name: "Daniel Ortega Pastor",
      wca_id: "2014PAST03",
      points: "126.72",
    },
    {
      position: "9ª",
      name: "Jesús Lindo García",
      wca_id: "2013GARC08",
      points: "113.51",
    },
    {
      position: "10ª",
      name: "Sergio Torrijos Santano",
      wca_id: "2013SANT13",
      points: "111.44",
    },
    {
      position: "11ª",
      name: "Iván Brigidano Pérez",
      wca_id: "2016PERE44",
      points: "104.15",
    },
    {
      position: "12ª",
      name: "Jorge Marín Segovia",
      wca_id: "2016SEGO02",
      points: "92.42",
    },
    {
      position: "13ª",
      name: "María del Mar Gallego Vicente",
      wca_id: "2013VICE01",
      points: "87.35",
    },
    {
      position: "14ª",
      name: "Javier Tovar Castro",
      wca_id: "2016CAST23",
      points: "84.58",
    },
    {
      position: "15ª",
      name: "Leonard Wetzel",
      wca_id: "2016WETZ01",
      points: "73.51",
    },
    {
      position: "16ª",
      name: "Rafael Rodríguez Santana",
      wca_id: "2012SANT12",
      points: "73.05",
    },
    {
      position: "17ª",
      name: "Jesús Masanet García",
      wca_id: "2004MASA01",
      points: "55.19",
    },
    {
      position: "18ª",
      name: "Adrián Otayza Rojas",
      wca_id: "2017ROJA22",
      points: "54.73",
    },
    {
      position: "19ª",
      name: "Pablo Serrano Santos",
      wca_id: "2017SANT63",
      points: "45.74",
    },
    {
      position: "20ª",
      name: "Alejandro Soriano",
      wca_id: "2018SORI06",
      points: "40.02",
    },
    {
      position: "21ª",
      name: "Clara Mompradé Mahedero",
      wca_id: "2017MAHE13",
      points: "38.28",
    },
    {
      position: "22ª",
      name: "Julio Perugorria Lorente",
      wca_id: "2014LORE02",
      points: "36.71",
    },
    {
      position: "23ª",
      name: "Laura Freitas Martín",
      wca_id: "2018MART18",
      points: "36.52",
    },
    {
      position: "24ª",
      name: "Leon Jakub Wyrobek",
      wca_id: "2016WYRO01",
      points: "34.34",
    },
    {
      position: "25ª",
      name: "César Pérez García",
      wca_id: "2008PERE01",
      points: "30",
    },
    {
      position: "25ª",
      name: "Fernando Astasio Ávila",
      wca_id: "2016AVIL02",
      points: "30",
    },
    {
      position: "25ª",
      name: "Manuel Jesús Carrasco Ruiz",
      wca_id: "2014RUIZ14",
      points: "30",
    },
    {
      position: "25ª",
      name: "Mikel Pérez Iniesto",
      wca_id: "2017INIE02",
      points: "30",
    },
    {
      position: "25ª",
      name: "Roberto Sánchez",
      wca_id: "2017SANC44",
      points: "30",
    },
    {
      position: "25ª",
      name: "Sofía Guerrero Neto",
      wca_id: "2017NETO02",
      points: "30",
    },
    {
      position: "31ª",
      name: "Luis Javier Sanz Sardina",
      wca_id: "2015SARD02",
      points: "21.6",
    },
    {
      position: "32ª",
      name: "Carlos Chamizo Cano",
      wca_id: "2016CANO02",
      points: "21.41",
    },
    {
      position: "33ª",
      name: "Álvaro Tovar Castro",
      wca_id: "2016CAST22",
      points: "20",
    },
    {
      position: "33ª",
      name: "Javier Matesanz Sala",
      wca_id: "2017SALA28",
      points: "20",
    },
    {
      position: "33ª",
      name: "José Miguel Lorente Pérez",
      wca_id: "2016PERE08",
      points: "20",
    },
    {
      position: "33ª",
      name: "Mario Díez del Corral",
      wca_id: "2018CORR05",
      points: "20",
    },
    {
      position: "33ª",
      name: "David Pérez Muñoz",
      wca_id: "2018MUNO10",
      points: "20",
    },
    {
      position: "38ª",
      name: "Diego Arche Andradas",
      wca_id: "2015ANDR06",
      points: "13.78",
    },
    {
      position: "39ª",
      name: "Alejandro Darío Castro Lázaro",
      wca_id: "2018LAZA10",
      points: "10",
    },
    {
      position: "39ª",
      name: "Daniel del Olmo Rodrigo",
      wca_id: "2018RODR42",
      points: "10",
    },
    {
      position: "39ª",
      name: "Héctor Castro Lázaro",
      wca_id: "2018LAZA11",
      points: "10",
    },
    {
      position: "39ª",
      name: "Jaime Solsona",
      wca_id: "2010SOLS01",
      points: "10",
    },
    {
      position: "39ª",
      name: "Santiago Borrego Verde",
      wca_id: "2016VERD05",
      points: "10",
    },
    {
      position: "39ª",
      name: "Pablo Domínguez Balbás",
      wca_id: "2019BALB01",
      points: "10",
    },
  ] %>

  <div id="general-classification-table" class="table table-responsive">
    <% headers = ["Posición", "Nombre", "Puntos"] %>
    <%= render "shared/compact_table", headers: headers do %>
      <% classification_2019.each do |c| %>
        <tr>
          <td><%= c[:position] %></td>
          <td><%= link_to c[:name], wca_profile_url(c[:wca_id]), target: "_blank" %></td>
          <td><%= c[:points] %></td>
        </tr>
      <% end %>
    <% end %>
  </div>

  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async>
  </script>
<% end %>
